/* ==========================================================================
   RP-GPT MAIN STYLESHEET
   ==========================================================================
   This file controls all the visual styling for the RP-GPT web interface.
   
   HOW THIS FILE IS ORGANIZED:
   1. Global Variables (:root) - Adjust these to change colors, sizes, textures
   2. Layout - Main content area, settings overlay
   3. 9-Slice Frame System - Creates ornate borders from texture images
   4. Form Elements - Input fields, buttons, selectors
   5. Page Layouts - World selection, roster, character creator screens
   6. Game Frame - The decorative border around the entire screen
   
   TIP: To customize colors or sizes, start by editing the variables in :root.
   ========================================================================== */


/* ==========================================================================
   GLOBAL VARIABLES
   ==========================================================================
   These variables control the appearance of UI elements throughout the app.
   Change a value here, and it updates everywhere that element appears.
   
   FORMAT: --variable-name: value;
   USAGE: var(--variable-name) elsewhere in the CSS
   ========================================================================== */

:root {
  /* --- UNIVERSAL BOX SETTINGS ---
     Controls the default padding and spacing for content boxes/panels.
     The ninebox system creates ornate frames from 9-slice textures.
  */
  --frame-image: url('/static/ui/nine_slice.png');
  /* Texture for ninebox panels */
  --box-slice: 50px;
  /* Corner slice size for boxes */
  --box-gap: 4px;
  /* Gap inside box frame */
  --box-padding: 2rem;
  /* Padding around content inside boxes (2rem = 32px) */

  /* --- INPUT FIELD SETTINGS ---
     Controls how text input fields and text areas look.
     Used for: character name input, description fields, etc.
  */
  --input-image: url('/static/ui/Input_Forms3.png');
  /* 9-slice texture for inputs */
  --input-py: 0.5rem;
  /* Vertical padding inside input (top/bottom) */
  --input-px: 1rem;
  /* Horizontal padding inside input (left/right) */
  --input-slice: 256;
  /* Pixels from source image for corners */
  --input-width: 10px;
  /* Thickness of the input border */
  --input-gap: 6px;
  /* Extra breathing room inside the frame */
  --input-overlay: rgba(0, 0, 0, 0.15);
  /* Dark tint over input background */
  --input-text: #e2e8f0;
  /* Color of text in inputs (light gray) */

  /* --- SCENARIO SELECTOR SETTINGS ---
     Controls the clickable "cards" used for selecting scenarios/worlds.
     These have a highlighted glow effect when selected.
  */
  --selector-image: url('/static/ui/input_forms3.png');
  /* 9-slice texture for selectors */
  --selector-slice: 256;
  /* Corner slice size */
  --selector-width: 20px;
  /* Border thickness */
  --selector-gap: 10px;
  /* Internal padding */
  --selector-overlay: rgba(20, 10, 2, 0.65);
  /* Dark brownish tint */
  --selector-text: #fdf5e4;
  /* Text color when selected (warm white) */
  --selector-muted: rgba(253, 245, 228, 0.75);
  /* Text color when not selected */
  --selector-glow: rgba(255, 179, 97, 0.65);
  /* Orange glow when selected */

  /* --- BUTTON SETTINGS ---
     Controls the appearance of action buttons (e.g., "Begin Journey", "Create").
  */
  --button-image: url('/static/ui/Buttons.png');
  /* 9-slice texture for buttons */
  --button-slice: 256;
  /* Corner slice size */
  --button-width: 22px;
  /* Border thickness */
  --button-padding-y: 1rem;
  /* Vertical padding inside button */
  --button-padding-x: .5rem;
  /* Horizontal padding inside button */
  --button-text: #c3c08d;
  /* Button text color (muted gold) */
  --button-text-shadow: rgb(255, 0, 0);
  /* Subtle highlight under text */

  /* --- GAME FRAME SETTINGS ---
     The decorative border that surrounds the ENTIRE screen.
     This is the big stone/fantasy frame you see around the edges.
     
     The slice values control which parts of the texture are corners vs edges:
     - Higher slice = larger corners (prevents stretching of decorations)
     - The candle and gargoyle decorations need large slices to avoid distortion
  */
  --game-frame-image: url('/static/ui/Game_Frame.png');
  /* The main frame texture */
  --game-frame-side: 490;
  /* Pixels for left/right edges */
  --game-frame-top: 680;
  /* Pixels for top edge (larger for gargoyle) */
  --game-frame-bottom: 600;
  /* Pixels for bottom edge (larger for candle) */
  --game-frame-thickness: clamp(150px, 6vw, 150px);
  /* How thick the frame appears on screen */

  /* --- IMAGE FRAME SETTINGS ---
     The decorative frame around character and world portrait images.
     Uses 9-slice to create an ornate picture frame effect.
     
     - slice: How many pixels are "corner" (don't stretch)
     - width: How thick the frame border appears
  */
  --image-frame: url('/static/ui/Image_Frame.png');
  /* Portrait frame texture */
  --image-frame-slice: 350;
  /* Corner protection (prevents candle from stretching) */
  --image-frame-width: 60px;
  /* Rendered thickness of portrait frame */
}


/* ==========================================================================
   MAIN LAYOUT
   ==========================================================================
   These styles control where content appears on screen and how it's
   positioned relative to the decorative game frame.
   ========================================================================== */

/* Main Content Area
   This is the container for all page content (world selection, roster, etc.)
   It's positioned inside the game frame with padding to prevent overlap.
   
   NOTE: The padding values are calculated from --game-frame-thickness
   so content automatically stays inside the decorative border.
*/
.app-content {
  position: relative;
  z-index: 10;
  width: 100%;
  margin: 0 auto;
  /* These paddings keep content away from the ornate frame edges */
  padding-left: calc(var(--game-frame-thickness) + 0.5rem);
  padding-right: calc(var(--game-frame-thickness) + 0.5rem);
  padding-top: calc(var(--game-frame-thickness) + 1rem);
  padding-bottom: calc(var(--game-frame-thickness) + 1rem);
  min-height: 100vh;
  box-sizing: border-box;
  transition: opacity 120ms ease, filter 120ms ease;
}

/* Loading State: Content fades slightly when HTMX is fetching new content */
.htmx-request .app-content {
  opacity: 0.7;
  filter: blur(0.5px);
}


/* ==========================================================================
   SETTINGS OVERLAY
   ==========================================================================
   A popup panel that appears when you press ESC.
   Contains reset button and other settings options.
   ========================================================================== */

/* Dark backdrop that covers the entire screen */
.settings-overlay {
  position: fixed;
  inset: 0;
  z-index: 100;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Hidden state - completely removes the overlay from display */
.settings-overlay.hidden {
  display: none;
}

/* The actual panel box in the center */
.settings-panel {
  background: rgba(15, 20, 30, 0.95);
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 2.5rem 3rem;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

/* Settings panel title */
.settings-title {
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 1.5rem;
  letter-spacing: 0.05em;
}

.settings-form {
  margin-bottom: 1.5rem;
}

.settings-close {
  background: transparent;
  border: none;
  color: rgba(226, 232, 240, 0.5);
  font-size: 0.85rem;
  cursor: pointer;
  transition: color 0.2s ease;
}

.settings-close:hover {
  color: rgba(226, 232, 240, 0.8);
}


/* ==========================================================================
   9-SLICE FRAME SYSTEM ("NINEBOX")
   ==========================================================================
   This system creates ornate borders by cutting a single texture image 
   into 9 pieces: 4 corners, 4 edges, and 1 center.
   
   The corners never stretch (maintaining detail like carvings).
   The edges stretch only in one direction (horizontally or vertically).
   The center stretches to fill the remaining space.
   
   This allows one texture to work for any size container!
   
   CLASSES:
   - .ninebox = The container
   - .nf = Frame piece (positioned absolutely)
   - .tl, .tr, .bl, .br = Corner pieces (top-left, top-right, bottom-left, bottom-right)
   - .t, .b, .l, .r = Edge pieces (top, bottom, left, right)
   - .c = Center piece
   ========================================================================== */

.ninebox {
  --img: var(--frame-image);
  /* Which texture to use */
  --slice: 256px;
  /* Size of corner pieces */
  --gap: 14px;
  /* Padding inside the frame */
  position: relative;
  padding: var(--gap);
}

/* Base style for all frame pieces */
.ninebox .nf {
  position: absolute;
  background-image: var(--img);
  background-repeat: no-repeat;
  background-size: 300% 300%;
  /* 3x3 grid to show 1/9th of image */
  image-rendering: auto;
  pointer-events: none;
  /* Allow clicks to pass through */
  z-index: 1;
}

/* corners */
.ninebox .tl {
  left: 0;
  top: 0;
  width: var(--slice);
  height: var(--slice);
  background-position: 0% 0%;
}

.ninebox .tr {
  right: 0;
  top: 0;
  width: var(--slice);
  height: var(--slice);
  background-position: 100% 0%;
}

.ninebox .bl {
  left: 0;
  bottom: 0;
  width: var(--slice);
  height: var(--slice);
  background-position: 0% 100%;
}

.ninebox .br {
  right: 0;
  bottom: 0;
  width: var(--slice);
  height: var(--slice);
  background-position: 100% 100%;
}

/* edges */
.ninebox .t {
  left: var(--slice);
  right: var(--slice);
  top: 0;
  height: var(--slice);
  background-position: 50% 0%;
}

.ninebox .b {
  left: var(--slice);
  right: var(--slice);
  bottom: 0;
  height: var(--slice);
  background-position: 50% 100%;
}

.ninebox .l {
  top: var(--slice);
  bottom: var(--slice);
  left: 0;
  width: var(--slice);
  background-position: 0% 50%;
}

.ninebox .r {
  top: var(--slice);
  bottom: var(--slice);
  right: 0;
  width: var(--slice);
  background-position: 100% 50%;
}

/* center tile */
.ninebox .c {
  left: var(--slice);
  right: var(--slice);
  top: var(--slice);
  bottom: var(--slice);
  background-position: 50% 50%;
  box-shadow: inset 0 0 24px rgba(0, 0, 0, 0.35);
}

.ninebox .nine-content {
  position: relative;
  z-index: 2;
}

.frame-panel {
  position: relative;
  border: none;
  padding: var(--tile-gap);
  border-radius: 16px;
  overflow: hidden;
}

.frame-panel::before {
  content: "";
  position: absolute;
  inset: 0;
  border-style: solid;
  border-width: var(--frame-w);
  border-image-source: var(--frame-image);
  border-image-slice: var(--slice);
  border-image-width: 1;
  border-image-repeat: stretch;
  border-image-outset: var(--frame-out);
  border-radius: inherit;
  pointer-events: none;
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25);
}

.frame-panel::after {
  content: "";
  position: absolute;
  inset: var(--tile-gap);
  background: rgba(18, 22, 32, 0.18);
  backdrop-filter: blur(0.6px);
  border-radius: calc(16px - var(--tile-gap) * 0.85);
  box-shadow:
    inset 0 0 30px rgba(0, 0, 0, 0.35),
    0 0 0 1px rgba(255, 255, 255, 0.04);
  pointer-events: none;
}


.frame-panel .panel-inner {
  position: relative;
  z-index: 1;
  padding: clamp(1rem, 2.2vw, 1.6rem);
  background: transparent;
}


.backdrop-overlay {
  background: radial-gradient(circle at top, rgba(12, 16, 32, 0.2), rgba(5, 7, 12, 0.85));
}

.scroll-fade {
  mask-image: linear-gradient(to bottom, transparent, black 24px, black calc(100% - 24px), transparent);
}

.button-glow {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  box-shadow: 0 6px 16px rgba(15, 118, 110, 0.35);
}

.button-glow:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 28px rgba(16, 185, 129, 0.45);
}

/* Universal Utilities */
.u-box {
  --img: var(--frame-image);
  --slice: var(--box-slice);
  --gap: var(--box-gap);
}

.u-box-content {
  padding: var(--box-padding);
}

.u-input-shell {
  --input-shell-py: calc(var(--input-width) + var(--input-gap));
  --input-shell-px: calc(var(--input-width) + var(--input-gap));
  position: relative;
  display: block;
  width: 100%;
  padding: var(--input-shell-py) var(--input-shell-px);
  isolation: isolate;
}

.u-input-shell::before {
  content: "";
  position: absolute;
  inset: 0;
  border-style: solid;
  border-width: var(--input-width);
  border-image-source: var(--input-image);
  border-image-slice: var(--input-slice) fill;
  border-image-width: var(--input-width);
  border-image-repeat: stretch;
  background-color: var(--input-overlay);
  box-shadow:
    inset 0 0 24px rgba(0, 0, 0, 0.4),
    0 12px 30px rgba(0, 0, 0, 0.45);
  pointer-events: none;
  z-index: 0;
}

.u-input-shell:focus-within::before {
  filter: drop-shadow(0 0 18px rgba(255, 189, 107, 0.4));
}

input.u-input,
textarea.u-input {
  padding-top: var(--input-py);
  padding-bottom: var(--input-py);
  padding-left: var(--input-px);
  padding-right: var(--input-px);
  width: 100%;
  position: relative;
  z-index: 1;
  font-size: 1rem;
  line-height: 1.4;
  font-family: inherit;
  color: var(--input-text);

  background-color: transparent !important;
  border: 0;
  outline: none;
  box-shadow: none !important;
  -webkit-appearance: none;
  appearance: none;
}

.u-input::placeholder {
  color: rgba(226, 232, 240, 0.6);
}

/* Scenario selector cards */
.scenario-card {
  position: relative;
  display: block;
  cursor: pointer;
  isolation: isolate;
}

.scenario-card input[type="radio"] {
  position: absolute;
  inset: 0;
  opacity: 0;
  cursor: pointer;
  margin: 0;
  width: 100%;
  height: 100%;
}

.scenario-face {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: calc(var(--selector-width) + var(--selector-gap));
  min-height: 4.5rem;
  letter-spacing: 0.05em;
  font-weight: 600;
  color: var(--selector-muted);
  text-transform: uppercase;
  transition: color 0.2s ease, transform 0.15s ease;
  z-index: 0;
}

.scenario-face::before {
  content: "";
  position: absolute;
  inset: 0;
  border-style: solid;
  border-width: var(--selector-width);
  border-image-source: var(--selector-image);
  border-image-slice: var(--selector-slice) fill;
  border-image-width: var(--selector-width);
  border-image-repeat: stretch;
  background-color: var(--selector-overlay);
  box-shadow:
    inset 0 0 30px rgba(0, 0, 0, 0.45),
    0 8px 20px rgba(0, 0, 0, 0.35);
  z-index: -1;
  transition: filter 0.2s ease, box-shadow 0.2s ease;
}

.scenario-card input:focus-visible+.scenario-face::before {
  box-shadow:
    inset 0 0 30px rgba(0, 0, 0, 0.4),
    0 0 0 2px rgba(255, 255, 255, 0.4);
}

.scenario-card input:checked+.scenario-face {
  color: var(--selector-text);
  transform: translateY(-2px);
}

.scenario-card input:checked+.scenario-face::before {
  filter: drop-shadow(0 0 16px var(--selector-glow));
}

.scenario-card input:not(:checked):hover+.scenario-face::before {
  filter: brightness(1.1);
}

/* Button frame */
.u-button {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  isolation: isolate;
  padding: calc(var(--button-padding-y) + var(--button-width) / 2) calc(var(--button-padding-x) + var(--button-width));
  color: var(--button-text);
  font-weight: 700;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  background: transparent;
  border: none;
  cursor: pointer;
  text-decoration: none;
  transition: transform 0.15s ease;
}

.u-button::before {
  content: "";
  position: absolute;
  inset: 0;
  border-style: solid;
  border-width: var(--button-width);
  border-image-source: var(--button-image);
  border-image-slice: var(--button-slice) fill;
  border-image-width: var(--button-width);
  border-image-repeat: stretch;
  background: radial-gradient(circle at 40% 30%, rgba(255, 196, 110, 0.5), transparent 60%),
    rgba(255, 179, 80, 0.2);
  box-shadow:
    inset 0 0 30px rgba(0, 0, 0, 0.45),
    0 16px 30px rgba(0, 0, 0, 0.45);
  z-index: -1;
  transition: filter 0.2s ease, box-shadow 0.2s ease;
}

.u-button:hover {
  transform: translateY(-2px);
}

.u-button:hover::before {
  filter: brightness(1.1);
}

.u-button:focus-visible::before {
  box-shadow:
    inset 0 0 30px rgba(0, 0, 0, 0.4),
    0 0 0 2px rgba(255, 255, 255, 0.45);
}

.u-button span,
.u-button strong,
.u-button {
  text-shadow: 0 1px 0 var(--button-text-shadow);
}

.u-button.outline {
  background: transparent;
}

.u-button[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}


/* ==========================================================================
   PAGE LAYOUTS
   ==========================================================================
   Styles for the main screens/pages: World Selection, Roster, Character Creator.
   These control how panels are arranged and how content flows within them.
   ========================================================================== */

/* --------------------------------------------------------------------------
   WORLD SELECTION PAGE
   The first page you see - shows available worlds to play in.
   Three-column layout: World list | Preview | World Details
   -------------------------------------------------------------------------- */

.worlds-grid {
  display: grid;
  gap: 1rem;
}

/* On larger screens (1024px+), switch to 3 columns */
@media (min-width: 1024px) {
  .worlds-grid {
    grid-template-columns: 1fr 1fr 1.2fr;
    /* Last column slightly wider */
  }
}

/* Individual panel height - calculated to fit within the game frame */
.world-panel {
  max-height: calc(100vh - var(--game-frame-thickness) * 2 - 2rem);
  overflow-y: auto;
  /* Allows scrolling if content is too tall */
}

.world-panel::-webkit-scrollbar,
.roster-panel::-webkit-scrollbar,
.creator-panel::-webkit-scrollbar {
  width: 8px;
}

.world-panel::-webkit-scrollbar-thumb,
.roster-panel::-webkit-scrollbar-thumb,
.creator-panel::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.25);
  border-radius: 999px;
}

.world-panel::-webkit-scrollbar-track,
.roster-panel::-webkit-scrollbar-track,
.creator-panel::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
}

.panel-heading {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 1rem;
  margin-bottom: 0.5rem;
}

.panel-overline {
  text-transform: uppercase;
  letter-spacing: 0.15em;
  font-size: 0.65rem;
  color: rgba(226, 232, 240, 0.7);
}

.panel-title {
  font-size: 1.3rem;
  font-weight: 600;
  letter-spacing: 0.02em;
}

.panel-subtle {
  font-size: 0.85rem;
  color: rgba(226, 232, 240, 0.7);
  margin-bottom: 1rem;
}

.u-scroll {
  max-height: clamp(320px, 55vh, 520px);
  overflow-y: auto;
  padding-right: 0.25rem;
  position: relative;
}

.u-scroll::-webkit-scrollbar {
  width: 6px;
}

.u-scroll::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 999px;
}

.world-entry {
  position: relative;
  display: block;
  padding: calc(var(--selector-width) / 2 + 0.35rem) calc(var(--selector-width) / 2 + 0.75rem);
  margin-bottom: 0.85rem;
  text-decoration: none;
  color: inherit;
  isolation: isolate;
}

.world-entry::before {
  content: "";
  position: absolute;
  inset: 0;
  border-style: solid;
  border-width: calc(var(--selector-width) / 1.4);
  border-image-source: var(--selector-image);
  border-image-slice: var(--selector-slice) fill;
  border-image-width: calc(var(--selector-width) / 1.4);
  border-image-repeat: stretch;
  background-color: rgba(6, 5, 10, 0.75);
  box-shadow:
    inset 0 0 25px rgba(0, 0, 0, 0.55),
    0 8px 18px rgba(0, 0, 0, 0.35);
  z-index: -1;
  transition: filter 0.2s ease, transform 0.15s ease;
}

.world-entry-title {
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.world-entry-subtitle {
  font-size: 0.85rem;
  color: rgba(226, 232, 240, 0.8);
  margin-top: 0.25rem;
}

.world-entry:hover::before {
  filter: brightness(1.1);
}

.world-entry.is-active::before {
  filter: drop-shadow(0 0 16px var(--selector-glow));
}

.world-preview {
  margin-top: .5rem;
  text-align: center;
}

.world-portrait-frame {
  position: relative;
  margin: 0 auto 1rem auto;
  max-width: 280px;
}

.world-portrait-frame::after {
  content: "";
  position: absolute;
  inset: -30px;
  border-style: solid;
  border-color: transparent;
  border-width: var(--image-frame-width);
  border-image-source: var(--image-frame);
  border-image-slice: var(--image-frame-slice) fill;
  border-image-width: var(--image-frame-width);
  border-image-repeat: stretch;
  pointer-events: none;
  z-index: 1;
}

.world-portrait {
  width: 100%;
  display: block;
  aspect-ratio: 4 / 3;
  object-fit: cover;
}

.world-preview-copy {
  font-size: 0.9rem;
  color: rgba(226, 232, 240, 0.8);
}

.world-blueprint {
  margin-top: 1rem;
  padding-right: 0.25rem;
}

.blueprint-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 1rem;
  font-size: 0.85rem;
}

.blueprint-grid dt {
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: rgba(226, 232, 240, 0.65);
  font-size: 0.7rem;
}

.blueprint-grid dd {
  margin-top: 0.1rem;
  font-weight: 600;
}

.blueprint-section {
  margin-top: 1.1rem;
  font-size: 0.9rem;
}

.blueprint-section .label {
  text-transform: uppercase;
  font-size: 0.7rem;
  letter-spacing: 0.1em;
  color: rgba(226, 232, 240, 0.65);
  margin-bottom: 0.4rem;
}

.blueprint-section .body {
  color: rgba(248, 250, 252, 0.85);
  line-height: 1.5;
}

.prose-block {
  white-space: pre-wrap;
}

/* Roster layout */
.roster-grid {
  display: grid;
  gap: 1rem;
}

@media (min-width: 1024px) {
  .roster-grid {
    grid-template-columns: 1fr 1fr 1.2fr;
  }
}

.roster-panel {
  max-height: calc(100vh - var(--game-frame-thickness) * 2 - 2rem);
  overflow-y: auto;
}

.roster-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.roster-heading {
  text-transform: uppercase;
  letter-spacing: 0.18em;
  font-size: 0.7rem;
  color: rgba(226, 232, 240, 0.55);
  margin-top: 0.75rem;
}

.roster-entry {
  display: grid;
  grid-template-columns: auto minmax(0, 1fr);
  gap: 0.65rem;
  align-items: center;
  padding: 0.35rem;
  border-radius: 10px;
  position: relative;
}

.roster-entry.is-focused::after {
  content: "";
  position: absolute;
  inset: -4px;
  border-radius: 14px;
  border: 1px solid rgba(255, 189, 107, 0.5);
  pointer-events: none;
}

.roster-toggle {
  width: 36px;
  height: 36px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(15, 15, 20, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: filter 0.2s ease;
}

.roster-toggle span {
  font-size: 1rem;
}

.roster-toggle.is-selected {
  background: rgba(255, 149, 64, 0.2);
  border-color: rgba(255, 149, 64, 0.6);
}

.roster-toggle:hover {
  filter: brightness(1.2);
}

.roster-body {
  display: flex;
  gap: 0.85rem;
  align-items: center;
  padding: 0.45rem 0.75rem;
  text-decoration: none;
  color: inherit;
  border-radius: 10px;
  background: rgba(12, 10, 16, 0.65);
  border: 1px solid rgba(255, 255, 255, 0.04);
}

.roster-body img {
  width: 48px;
  height: 48px;
  border-radius: 8px;
  object-fit: cover;
}

.roster-name {
  font-weight: 600;
  letter-spacing: 0.04em;
}

.roster-meta {
  font-size: 0.8rem;
  color: rgba(226, 232, 240, 0.75);
}

.portrait-preview {
  text-align: center;
}

.portrait-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-top: 1.5rem;
  justify-content: center;
}

.character-form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-height: clamp(380px, 60vh, 520px);
  overflow-y: auto;
}


/* ==========================================================================
   THE GAME FRAME
   ==========================================================================
   This is the ornate decorative border that surrounds the ENTIRE screen.
   It's the big fantasy stone frame with gargoyles, candles, and carvings.
   
   HOW IT WORKS:
   - Uses CSS border-image with 9-slice to stretch a texture
   - Positioned as "fixed" so it stays in place even when scrolling
   - The slice values protect the corner decorations from stretching
   - Content area has matching padding to stay inside the frame
   
   TO ADJUST:
   - Change --game-frame-thickness in :root to make frame thicker/thinner
   - Slice values control which parts are "corners" (don't stretch)
   - If decorations look stretched, increase the corresponding slice value
   ========================================================================== */

.game-frame-shell {
  position: fixed;
  inset: 0;
  /* Cover entire viewport */
  border-style: solid;
  border-color: transparent;
  border-width: var(--game-frame-thickness);
  /* How thick the frame is */
  border-image-source: var(--game-frame-image);
  /* The frame texture image */
  /* The slice values: top | right | bottom | left */
  border-image-slice: var(--game-frame-top) var(--game-frame-side) var(--game-frame-bottom) var(--game-frame-side);
  border-image-width: 1;
  border-image-repeat: stretch;
  pointer-events: none;
  /* Allow clicks to pass through the frame */
  z-index: 40;
  /* Sits above most content but below modals */
  mix-blend-mode: normal;
}

/* On mobile: make the frame thinner to save screen space */
@media (max-width: 768px) {
  .game-frame-shell {
    border-width: clamp(40px, 12vw, 70px);
  }
}

/* Character creator */
.creator-grid {
  display: grid;
  gap: 1rem;
}

@media (min-width: 1024px) {
  .creator-grid {
    grid-template-columns: 1fr 1fr 1.2fr;
  }
}

.creator-panel {
  max-height: calc(100vh - var(--game-frame-thickness) * 2 - 2rem);
  overflow-y: auto;
}

.pc-actions {
  margin-bottom: 0.75rem;
}

.pc-list {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  max-height: clamp(360px, 60vh, 520px);
}

.pc-entry {
  display: flex;
  gap: 0.85rem;
  align-items: center;
  padding: 0.6rem 0.85rem;
  border-radius: 12px;
  text-decoration: none;
  color: inherit;
  background: rgba(8, 8, 14, 0.7);
  border: 1px solid rgba(255, 255, 255, 0.05);
  transition: filter 0.2s ease;
}

.pc-entry.is-active {
  border-color: rgba(255, 189, 107, 0.6);
  box-shadow: 0 0 12px rgba(255, 189, 107, 0.3);
}

.pc-entry:hover {
  filter: brightness(1.05);
}

.pc-entry img {
  width: 56px;
  height: 56px;
  object-fit: cover;
  border-radius: 10px;
}

.pc-name {
  font-weight: 600;
  letter-spacing: 0.04em;
}

.pc-meta {
  font-size: 0.8rem;
  color: rgba(226, 232, 240, 0.7);
}

.creator-form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-height: clamp(420px, 65vh, 540px);
  overflow-y: auto;
}

.stat-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
  gap: 0.65rem;
  font-size: 0.85rem;
}

.stat-grid label span {
  display: block;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-size: 0.75rem;
  color: rgba(226, 232, 240, 0.7);
}